{% extends "core/base.html" %}
{% load static %}

{% block title %}Resultados - IHCion√°rio{% endblock %}

{% block pageTitle %}Resultados da Busca{% endblock %}

{% block pageTitleMobile %}Resultados da Busca{% endblock %}

{% block content %}
<div class="page-content">
    {% for capitulo in capitulos %}
    <h2 class="definitions-category">{{ capitulo.titulo }}</h2>
    <div class="definition-category-list">
        {% for termo in capitulo.termos.all %}
        <div class="definition-item">
            <span class="material-icons">menu_book</span>
            <div class="definition-text">
                <a href="{% url 'detail' id=termo.id %}" style="text-decoration: none;">
                    <h3 class="definition-term">{{ termo.titulo }}</h3>
                </a>
                {% with definicao=termo.definicoes.first %}
                <p class="definition-text">{{ definicao.texto }}</p>
                {% endwith %}

            </div>
        </div>
        {% endfor %}
    </div>
    {% endfor %}

    {% if query %}
    {% if termos %}
    {% regroup termos by capitulo as termos_por_capitulo %}
    {% for grupo in termos_por_capitulo %}
    <h2 class="definitions-category">{{ grupo.grouper.titulo }}</h2>
    {% for termo in grupo.list %}
    <div class="definition-item {% if forloop.last %}no-border{% endif %}">
        <span class="material-icons">menu_book</span>
        <div class="definition-text">
            <a href="{% url 'detail' id=termo.id %}" style="text-decoration: none; display: flex; align-items: center; gap: 4px;">
                <h3 class="definition-term" style="margin: 0;">{{ termo.titulo }}</h3>
                <span class="material-icons" style="font-size: 20px; color: #933dbd;">open_in_new</span>
            </a>
            {% with definicao=termo.definicoes.first %}
            <p class="definition-text">{{ definicao.texto }}</p>
            {% endwith %}

        </div>
    </div>
    {% endfor %}
    {% endfor %}
    {% else %}
    <p>Nenhum termo encontrado.</p>
    {% endif %}
    {% endif %}
</div>
{% endblock %}